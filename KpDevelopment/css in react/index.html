<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React的CSS方案</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="">
    <link rel="preload" href="/study_blog/assets/css/0.styles.26012ee8.css" as="style"><link rel="preload" href="/study_blog/assets/js/app.fa73ec29.js" as="script"><link rel="preload" href="/study_blog/assets/js/2.c359b067.js" as="script"><link rel="preload" href="/study_blog/assets/js/19.4f83ae72.js" as="script"><link rel="prefetch" href="/study_blog/assets/js/10.711088b9.js"><link rel="prefetch" href="/study_blog/assets/js/11.4bc7751b.js"><link rel="prefetch" href="/study_blog/assets/js/12.6bd1c5ed.js"><link rel="prefetch" href="/study_blog/assets/js/13.68deeced.js"><link rel="prefetch" href="/study_blog/assets/js/14.315144b3.js"><link rel="prefetch" href="/study_blog/assets/js/15.9342324c.js"><link rel="prefetch" href="/study_blog/assets/js/16.1310006a.js"><link rel="prefetch" href="/study_blog/assets/js/17.b94b283d.js"><link rel="prefetch" href="/study_blog/assets/js/18.f7bd3752.js"><link rel="prefetch" href="/study_blog/assets/js/20.10e28f9e.js"><link rel="prefetch" href="/study_blog/assets/js/21.133ed4c6.js"><link rel="prefetch" href="/study_blog/assets/js/22.ea3da500.js"><link rel="prefetch" href="/study_blog/assets/js/23.90f06376.js"><link rel="prefetch" href="/study_blog/assets/js/24.7e0e6769.js"><link rel="prefetch" href="/study_blog/assets/js/25.76892a53.js"><link rel="prefetch" href="/study_blog/assets/js/26.a0ff0e69.js"><link rel="prefetch" href="/study_blog/assets/js/27.0e7a093f.js"><link rel="prefetch" href="/study_blog/assets/js/28.9e443cbf.js"><link rel="prefetch" href="/study_blog/assets/js/29.3555568a.js"><link rel="prefetch" href="/study_blog/assets/js/3.03532752.js"><link rel="prefetch" href="/study_blog/assets/js/30.b7e07863.js"><link rel="prefetch" href="/study_blog/assets/js/31.ecec9c8f.js"><link rel="prefetch" href="/study_blog/assets/js/32.2ba959f9.js"><link rel="prefetch" href="/study_blog/assets/js/33.0c26e454.js"><link rel="prefetch" href="/study_blog/assets/js/34.22f8a3a3.js"><link rel="prefetch" href="/study_blog/assets/js/35.ba45dd05.js"><link rel="prefetch" href="/study_blog/assets/js/36.b92c80eb.js"><link rel="prefetch" href="/study_blog/assets/js/37.466f0839.js"><link rel="prefetch" href="/study_blog/assets/js/38.ed111741.js"><link rel="prefetch" href="/study_blog/assets/js/39.02b875d0.js"><link rel="prefetch" href="/study_blog/assets/js/4.b5d9f4e7.js"><link rel="prefetch" href="/study_blog/assets/js/40.b5a19844.js"><link rel="prefetch" href="/study_blog/assets/js/5.c2d54515.js"><link rel="prefetch" href="/study_blog/assets/js/6.413eb2f7.js"><link rel="prefetch" href="/study_blog/assets/js/7.546e37c0.js"><link rel="prefetch" href="/study_blog/assets/js/8.7aba858b.js"><link rel="prefetch" href="/study_blog/assets/js/9.9023b09e.js">
    <link rel="stylesheet" href="/study_blog/assets/css/0.styles.26012ee8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/study_blog/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/study_blog/" class="nav-link">
  博客
</a></div><div class="nav-item"><a href="/study_blog/ambition/2020/" class="nav-link">
  日记
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/study_blog/" class="nav-link">
  博客
</a></div><div class="nav-item"><a href="/study_blog/ambition/2020/" class="nav-link">
  日记
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/study_blog/" class="sidebar-link">Home</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS语言特性</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网页API</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>React开发</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study_blog/KpDevelopment/css%20in%20react/" class="active sidebar-link">React的CSS方案</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study_blog/KpDevelopment/css%20in%20react/#css的缺陷" class="sidebar-link">CSS的缺陷</a></li><li class="sidebar-sub-header"><a href="/study_blog/KpDevelopment/css%20in%20react/#关于sass题外话" class="sidebar-link">关于sass题外话</a></li><li class="sidebar-sub-header"><a href="/study_blog/KpDevelopment/css%20in%20react/#vue的解决方案" class="sidebar-link">Vue的解决方案</a></li><li class="sidebar-sub-header"><a href="/study_blog/KpDevelopment/css%20in%20react/#内联css" class="sidebar-link">内联CSS</a></li><li class="sidebar-sub-header"><a href="/study_blog/KpDevelopment/css%20in%20react/#引入式css" class="sidebar-link">引入式CSS</a></li><li class="sidebar-sub-header"><a href="/study_blog/KpDevelopment/css%20in%20react/#css-in-js" class="sidebar-link">Css in Js</a></li><li class="sidebar-sub-header"><a href="/study_blog/KpDevelopment/css%20in%20react/#css-modules" class="sidebar-link">Css Modules</a></li><li class="sidebar-sub-header"><a href="/study_blog/KpDevelopment/css%20in%20react/#styled-components" class="sidebar-link">styled-components</a></li><li class="sidebar-sub-header"><a href="/study_blog/KpDevelopment/css%20in%20react/#小结" class="sidebar-link">小结</a></li></ul></li><li><a href="/study_blog/KpDevelopment/routing/" class="sidebar-link">路由</a></li><li><a href="/study_blog/KpDevelopment/react-router/" class="sidebar-link">React-router-初见</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS生态</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>刷题</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="react的css方案"><a href="#react的css方案" class="header-anchor">#</a> React的CSS方案</h1> <h2 id="css的缺陷"><a href="#css的缺陷" class="header-anchor">#</a> CSS的缺陷</h2> <ul><li>样式与状态相关的情况越来越多，需要动态、能直接访问组件state的css。</li> <li>css不是组件化。一切样式都是全局，类的命名重复，但当你使用三方插件时却无法避免命名冲突。</li> <li></li></ul> <h2 id="关于sass题外话"><a href="#关于sass题外话" class="header-anchor">#</a> 关于sass题外话</h2> <ul><li>sass指预编译器和缩进式css语言</li> <li>预编译器有两种node-sass和dart-sass，node-sass已经退出舞台了</li> <li>scss并不能解决css的问题</li></ul> <h2 id="vue的解决方案"><a href="#vue的解决方案" class="header-anchor">#</a> Vue的解决方案</h2> <ul><li>v-bind 和 class/style 的结合,解决了依赖变化时样式发生变化<br> <code>&lt;div v-bind:class=&quot;{ active: isActive }&quot;&gt;&lt;/div&gt;</code>，<br> <code>&lt;div v-bind:class=&quot;[activeClass, errorClass]&quot;&gt;&lt;/div&gt;</code>，<br> <code>&lt;div v-bind:style=&quot;styleObject&quot;&gt;&lt;/div&gt;</code><br> <code>&lt;div v-bind:style=&quot;[baseStyles, overridingStyles]&quot;&gt;&lt;/div&gt;</code></li> <li>scoped css的语法</li></ul> <h2 id="内联css"><a href="#内联css" class="header-anchor">#</a> 内联CSS</h2> <p>传统的inline-style</p> <div class="language- extra-class"><pre class="language-text"><code>const textStyles = {
  color: 'white',
  backgroundColor: this.state.bgColor
};

&lt;p style={textStyles}&gt;inline style&lt;/p&gt;
</code></pre></div><p>和Vue的内联样式非常相似</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;div v-bind:style=&quot;styleObject&quot;&gt;&lt;/div&gt;
data: {
  styleObject: {
    color: 'red',
    fontSize: '13px'
  }
}
</code></pre></div><p>缺陷：</p> <ul><li>内联样式并不支持所有的 css，媒体查询，:before和:nth-child等 pseudo selectors</li></ul> <p>Vue可以通过计算属性计算出一个样式对象，解决了样式与状态相关的情况。切换class也可以做到</p> <h2 id="引入式css"><a href="#引入式css" class="header-anchor">#</a> 引入式CSS</h2> <p>最普通常见的方式，在 jsx 文件中引入<code>import './App.css'</code>，这种方式适合引入CSS-reset和SCSS的全局变量。</p> <p>@import-normalize 是 create-react-app 官方自带的 reset 和我们常用的 reset 的区别就在于，我们会把所有样式都清零，而normalize只是给所有标签加了一个默认样式，消除了不同浏览器对不同标签的默认样式。</p> <p>normalize 并没有什么卵用。</p> <h2 id="css-in-js"><a href="#css-in-js" class="header-anchor">#</a> Css in Js</h2> <p>主要依赖于很多React库Radium，Aphrodite，下面介绍一下<a href="https://github.com/FormidableLabs/radium/tree/master/docs/guides" target="_blank" rel="noopener noreferrer">Radium<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language- extra-class"><pre class="language-text"><code>import Radium from 'radium';

const Button = () =&gt; (
    &lt;button
        style={styles.red}&gt;
        {this.props.children}
    &lt;/button&gt;;
)

var styles = {
  red: {
    backgroundColor: 'red'
  }
};

Button = Radium(Button);
</code></pre></div><p>Radium is activated by wrapping your component。</p> <p>这种类型的库扩展了React能支持的css的范围，并且通过给Button组件传入一个对象，并把对象放到style数组中，完成了根据state变化style</p> <div class="language- extra-class"><pre class="language-text"><code>    style={[
      styles.base,
      this.props.block &amp;&amp; styles.block
    ]}&gt;
</code></pre></div><p>样式只作用于import它的组件</p> <h2 id="css-modules"><a href="#css-modules" class="header-anchor">#</a> Css Modules</h2> <p>Css Modules 并不是React专用解决方法，适用于所有使用 webpack 等打包工具的开发环境。以 webpack 为例，在 css-loader 的 options 里打开modules：true 选项即可</p> <div class="language- extra-class"><pre class="language-text"><code>import styles from './table.css';

    render () {
        return &lt;div className={styles.table}&gt;
            &lt;div className={styles.row}&gt;
                &lt;div className={styles.cell}&gt;A0&lt;/div&gt;
                &lt;div className={styles.cell}&gt;B0&lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;;
    }
/* table.css */
.table {}
.row {}
.cell {}
</code></pre></div><p>Css Modules还有一大缺憾：和Vue的解决一样，因为css写在css文件，无法处理动态css。</p> <h2 id="styled-components"><a href="#styled-components" class="header-anchor">#</a> styled-components</h2> <p>ES6 的模板字符串，在js文件里写纯粹的css。</p> <div class="language- extra-class"><pre class="language-text"><code>const Title = styled.h1`
  font-size: 1.5em;
  text-align: center;
  color: palevioletred;
`;
</code></pre></div><p>返回的是一个带样式的组件</p> <div class="language- extra-class"><pre class="language-text"><code>// 在充分使用css全部功能的同时，非常方便的实现动态css， 甚至可以直接调用props！
const Wrapper = styled.section`
  padding: 4em;
  background: ${props =&gt; props.bgColor};
`;
</code></pre></div><h2 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h2> <ul><li>要解决的两个问题：模块化和动态css</li> <li>内联CSS，引入式CSS，CSS in JS，Css Modules</li> <li>内联CSS：部分伪元素选择器不支持</li> <li>引入式：样式作用于全局</li> <li>CSS in JS：很好的实现了state和style的结合，因为css就在js文件里直接访问就行</li> <li>CSS in JS 是对内联CSS的升级补充了内联不支持的部分选择器，完美地实现了模块化和动态CSS</li> <li>Css Modules:利用className来处理样式，无法处理动态css。</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/study_blog/assets/js/app.fa73ec29.js" defer></script><script src="/study_blog/assets/js/2.c359b067.js" defer></script><script src="/study_blog/assets/js/19.4f83ae72.js" defer></script>
  </body>
</html>
