<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS专精-变量提升/函数</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="">
    <link rel="preload" href="/study_blog/assets/css/0.styles.26012ee8.css" as="style"><link rel="preload" href="/study_blog/assets/js/app.fa73ec29.js" as="script"><link rel="preload" href="/study_blog/assets/js/2.c359b067.js" as="script"><link rel="preload" href="/study_blog/assets/js/14.315144b3.js" as="script"><link rel="prefetch" href="/study_blog/assets/js/10.711088b9.js"><link rel="prefetch" href="/study_blog/assets/js/11.4bc7751b.js"><link rel="prefetch" href="/study_blog/assets/js/12.6bd1c5ed.js"><link rel="prefetch" href="/study_blog/assets/js/13.68deeced.js"><link rel="prefetch" href="/study_blog/assets/js/15.9342324c.js"><link rel="prefetch" href="/study_blog/assets/js/16.1310006a.js"><link rel="prefetch" href="/study_blog/assets/js/17.b94b283d.js"><link rel="prefetch" href="/study_blog/assets/js/18.f7bd3752.js"><link rel="prefetch" href="/study_blog/assets/js/19.4f83ae72.js"><link rel="prefetch" href="/study_blog/assets/js/20.10e28f9e.js"><link rel="prefetch" href="/study_blog/assets/js/21.133ed4c6.js"><link rel="prefetch" href="/study_blog/assets/js/22.ea3da500.js"><link rel="prefetch" href="/study_blog/assets/js/23.90f06376.js"><link rel="prefetch" href="/study_blog/assets/js/24.7e0e6769.js"><link rel="prefetch" href="/study_blog/assets/js/25.76892a53.js"><link rel="prefetch" href="/study_blog/assets/js/26.a0ff0e69.js"><link rel="prefetch" href="/study_blog/assets/js/27.0e7a093f.js"><link rel="prefetch" href="/study_blog/assets/js/28.9e443cbf.js"><link rel="prefetch" href="/study_blog/assets/js/29.3555568a.js"><link rel="prefetch" href="/study_blog/assets/js/3.03532752.js"><link rel="prefetch" href="/study_blog/assets/js/30.b7e07863.js"><link rel="prefetch" href="/study_blog/assets/js/31.ecec9c8f.js"><link rel="prefetch" href="/study_blog/assets/js/32.2ba959f9.js"><link rel="prefetch" href="/study_blog/assets/js/33.0c26e454.js"><link rel="prefetch" href="/study_blog/assets/js/34.22f8a3a3.js"><link rel="prefetch" href="/study_blog/assets/js/35.ba45dd05.js"><link rel="prefetch" href="/study_blog/assets/js/36.b92c80eb.js"><link rel="prefetch" href="/study_blog/assets/js/37.466f0839.js"><link rel="prefetch" href="/study_blog/assets/js/38.ed111741.js"><link rel="prefetch" href="/study_blog/assets/js/39.02b875d0.js"><link rel="prefetch" href="/study_blog/assets/js/4.b5d9f4e7.js"><link rel="prefetch" href="/study_blog/assets/js/40.b5a19844.js"><link rel="prefetch" href="/study_blog/assets/js/5.c2d54515.js"><link rel="prefetch" href="/study_blog/assets/js/6.413eb2f7.js"><link rel="prefetch" href="/study_blog/assets/js/7.546e37c0.js"><link rel="prefetch" href="/study_blog/assets/js/8.7aba858b.js"><link rel="prefetch" href="/study_blog/assets/js/9.9023b09e.js">
    <link rel="stylesheet" href="/study_blog/assets/css/0.styles.26012ee8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/study_blog/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/study_blog/" class="nav-link">
  博客
</a></div><div class="nav-item"><a href="/study_blog/ambition/2020/" class="nav-link">
  日记
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/study_blog/" class="nav-link">
  博客
</a></div><div class="nav-item"><a href="/study_blog/ambition/2020/" class="nav-link">
  日记
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/study_blog/" class="sidebar-link">Home</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JS语言特性</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study_blog/ES6/hoisting/" class="active sidebar-link">JS专精-变量提升/函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study_blog/ES6/hoisting/#两种函数" class="sidebar-link">两种函数</a></li><li class="sidebar-sub-header"><a href="/study_blog/ES6/hoisting/#函数的影响因素" class="sidebar-link">函数的影响因素</a></li><li class="sidebar-sub-header"><a href="/study_blog/ES6/hoisting/#变量提升" class="sidebar-link">变量提升</a></li><li class="sidebar-sub-header"><a href="/study_blog/ES6/hoisting/#function声明提升" class="sidebar-link">function声明提升</a></li><li class="sidebar-sub-header"><a href="/study_blog/ES6/hoisting/#函数表达式声明" class="sidebar-link">函数表达式声明</a></li><li class="sidebar-sub-header"><a href="/study_blog/ES6/hoisting/#var变量提升" class="sidebar-link">var变量提升</a></li><li class="sidebar-sub-header"><a href="/study_blog/ES6/hoisting/#let和const变量提升" class="sidebar-link">let和const变量提升</a></li><li class="sidebar-sub-header"><a href="/study_blog/ES6/hoisting/#class声明提升" class="sidebar-link">class声明提升</a></li><li class="sidebar-sub-header"><a href="/study_blog/ES6/hoisting/#变量提升小结" class="sidebar-link">变量提升小结</a></li></ul></li><li><a href="/study_blog/ES6/lexicalenvironment/" class="sidebar-link">JS专精-执行上下文/函数</a></li><li><a href="/study_blog/ES6/closure/" class="sidebar-link">JS 专精-函数/闭包</a></li><li><a href="/study_blog/ES6/fibonacc/" class="sidebar-link">JS专精-递归/尾递归/记忆化/react的记忆化</a></li><li><a href="/study_blog/ES6/currying/" class="sidebar-link">JS专精-柯里化/闭包隐藏变量的原因</a></li><li><a href="/study_blog/ES6/eventhub/" class="sidebar-link">JS专精-EventHub/ts实现</a></li><li><a href="/study_blog/ES6/deepclone/" class="sidebar-link">JS专精-JSON格式/JSON对象/深拷贝/函数作为参数</a></li><li><a href="/study_blog/ES6/bind/" class="sidebar-link">JS专精-实现bind/apply/call</a></li><li><a href="/study_blog/ES6/promise/" class="sidebar-link">手写 Promise</a></li><li><a href="/study_blog/ES6/promise2/" class="sidebar-link">手写 Promise-重置版</a></li><li><a href="/study_blog/ES6/eventloop/" class="sidebar-link">浏览器的事件循环</a></li><li><a href="/study_blog/ES6/await/" class="sidebar-link">async</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网页API</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS生态</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>刷题</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="js专精-变量提升-函数"><a href="#js专精-变量提升-函数" class="header-anchor">#</a> JS专精-变量提升/函数</h1> <h2 id="两种函数"><a href="#两种函数" class="header-anchor">#</a> 两种函数</h2> <ul><li><p>编程的函数：执行某个任务的一段代码</p></li> <li><p>数学的函数：f(x) = y<br>
假设输入为x1,那么必有一个输出y1: f(x1)=y1<br>
假设输入为x2,那么对应的输出可以是y1,也可不是，不管你输入多少次x1,输出都是y1</p></li> <li><p>如果你的函数符合数学定义那么就叫做函数式</p></li></ul> <h2 id="函数的影响因素"><a href="#函数的影响因素" class="header-anchor">#</a> 函数的影响因素</h2> <blockquote><p>重点：所有函数的问题都可以归结到这两个因素上</p></blockquote> <ul><li>定义时输入的参数 params</li> <li>定义时的环境 env</li></ul> <h2 id="变量提升"><a href="#变量提升" class="header-anchor">#</a> 变量提升</h2> <p>JS的六种声明变量的方式</p> <ul><li>var</li> <li>function   函数声明和函数表达式</li> <li>let</li> <li>const</li> <li>import</li> <li>class   类声明和类表达式</li></ul> <h2 id="function声明提升"><a href="#function声明提升" class="header-anchor">#</a> function声明提升</h2> <div class="language- extra-class"><pre class="language-text"><code>helloWorld();  // 打印 'Hello World!'
function helloWorld(){
  console.log('Hello World!');
}
</code></pre></div><p>函数声明会在编译阶段就会被记录在词法环境中并且保存在内存中，因此我们可以在函数进行实际声明之前对该函数进行访问。<strong>在词法环境中被保存为函数</strong>
上面函数声明保存在词法环境中像下面这样：</p> <div class="language- extra-class"><pre class="language-text"><code>lexicalEnvironment = {
  helloWorld: &lt; func &gt;
}
</code></pre></div><p>所以在代码执行阶段，当Javascript引擎碰到helloWorld()这行代码，会在词法环境中寻找，然后找到这个函数并执行它。</p> <h2 id="函数表达式声明"><a href="#函数表达式声明" class="header-anchor">#</a> 函数表达式声明</h2> <p>只有函数声明才会被直接提升，使用函数表达式声明的函数不会被提升</p> <div class="language- extra-class"><pre class="language-text"><code>helloWorld();  // TypeError: helloWorld is not a function
var helloWorld = function(){
  console.log('Hello World!');
}
</code></pre></div><p>使用var声明的helloWorld是个变量，并不是函数，Javascript引擎只会把它当成普通的变量来处理，而不会在词法环境中给它赋值。<strong>在词法环境中被保存为普通变量</strong>
保存在词法环境中像下面这样：</p> <div class="language- extra-class"><pre class="language-text"><code>lexicalEnvironment = {
  helloWorld: undefined
}
</code></pre></div><h2 id="var变量提升"><a href="#var变量提升" class="header-anchor">#</a> var变量提升</h2> <p>所谓的声明提升只是在编译阶段Javascript引擎将<strong>函数声明</strong>和<strong>变量声明</strong>存储在词法环境中，但不会给它们赋值。等到了执行阶段，真正执行到赋值那一行的时候，词法环境才会更新。</p> <h2 id="let和const变量提升"><a href="#let和const变量提升" class="header-anchor">#</a> let和const变量提升</h2> <p>在Javascript中所有声明的变量(var,const,let,function,class)都存在变量提升的情况。使用var声明的变量，在词法环境中会被初始化为undefined，但用let和const声明的变量并不会被初始化。
使用let和const声明的变量只有在执行到赋值那行代码的时候才会真正给他赋值，这也意味着在执行到变量声明的那行代码之前访问那个变量都会报错，这就是我们常说的暂时性死区(TDZ)。即在变量声明之前都不能对变量进行访问。
在代码编译阶段，Javascript引擎会把变量a存储在词法环境中，并把a保持在未初始化的状态。此时词法环境像下面这样：</p> <div class="language- extra-class"><pre class="language-text"><code>lexicalEnvironment = {
  a: &lt;uninitialized&gt;
}
</code></pre></div><p>这里需要纠正一个误区，就是let和const声明的变量只有暂时性死区，不存在变量提升，其实是不对的，举个例子证明理解一下：</p> <div class="language- extra-class"><pre class="language-text"><code>let a = 1;
{
  console.log(a);
  let a = 2;
}
</code></pre></div><p>上面的代码会被报错：如果不存在变量提升，理论上不会报错。</p> <h2 id="class声明提升"><a href="#class声明提升" class="header-anchor">#</a> class声明提升</h2> <p>与let、const类似，使用class声明的类也会被提升，然后这个类声明会被保存在词法环境中但处于未初始化的状态，直到执行到变量赋值那一行代码，才会被初始化。所以，class声明的类一样存在暂时性死区(TDZ)。<br>
函数表达式还是类表达式遵循的规则和变量声明是一样的。</p> <h2 id="变量提升小结"><a href="#变量提升小结" class="header-anchor">#</a> 变量提升小结</h2> <ul><li>JS声明都存在变量提升</li> <li>var:存在变量提升，在编译阶段会被初始化为undefined；</li> <li>let:存在变量提升，存在暂时性死区（TDZ），执行阶段，如果没赋值，则初始化为undefined</li> <li>const:存在变量提升，存在暂时性死区（TDZ），如果没有赋值，编译阶段就会报错</li> <li>let 和 const 分为创建/初始化/赋值，三阶段，var是创建和初始化一起提升，而这两个只提升了创建。</li> <li>class： 存在变量提升，存在暂时性死区（TDZ）；</li> <li>function：存在变量提升，在变量声明之前可以访问并执行；<strong>这个是最特殊的</strong>，在声明之前使用可以不损失任何功能至少 var 之前使用变量会变成undefined。因为它在词法作用域里就被声明成函数，之后调用直接在词法作用域里查找即可</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/study_blog/algorithm/stackalgorithm/" class="prev">
        后缀表达式-逆波兰
      </a></span> <span class="next"><a href="/study_blog/ES6/lexicalenvironment/">
        JS专精-执行上下文/函数
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/study_blog/assets/js/app.fa73ec29.js" defer></script><script src="/study_blog/assets/js/2.c359b067.js" defer></script><script src="/study_blog/assets/js/14.315144b3.js" defer></script>
  </body>
</html>
